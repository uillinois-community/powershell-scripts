# GitHub Markdown Helpers Module

## About

This library provides a set of opinionated commands that perform common agile searches using GitHub CLI.

I have had trouble keeping `PowerShellForGitHub` working, so
I am gradually migrating functionality from `AgileGitHub.psm1`, which relies on `PowerShellForGitHub` into this repository, which does not.

A drawback of this approach is that the output of GitHub CLI is nice for printing to the screen, but requires a tool like `awk` to parse.

## Core Functionality

The core functionality of this module is to take a GitHub CLI command and run it against a pre-configured set of locally cloned git repositories.

For example, to list the latest two releases across every configured repository: 

`Invoke-AgileCmd "gh release list -L 2"`

The commands require a local clone of each repository listed in `$env:GITHUB_REPOS` - each as a directory inside the directory set by `$env:GITHUB_CLONE_PATH`.

A helper method, `InvokeAgileCloneAll`, is included which will attempt to clone each configured repository into the expected place, using the `SSH / git@github.com:` clone method.

## Setup & Dependencies

This library depends on [GitHub CLI](https://cli.github.com/) being installed and configured, and the following environment variables being set - typically in your PowerShell profile:

```powershell
$env:GITHUB_CLONE_PATH = '~/repos'
$env:GITHUB_REPOS = @(
    'OWNER/REPOSITORY'
    , 'OWNER/REPOSITORY'
    , 'OWNER/REPOSITORY'
)
```

## Command Types

The list of available commands can be generated with this command:

```PowerShell
Get-Command -Module AgileGitHubCLI
```
Examples for specific commands can be fetched with this command:

```Powershell
Get-Help <command name> -Examples
```

The `Invoke-AgileQuery` command helps conveniently invoke a set of queries
 generated by the `Get-` commands.

> The only reason to use these instead of calling `Get-GitHubIssue` directly is
> if you wish to conveniently run the same query across multiple repositories.

[23]: https://github.com/microsoft/PowerShellForGitHub

## Interesting Commands

- List all open issues with label 'bug' in all configured repositories

    `Invoke-AgileCmd "gh issue list -S 'label:bug'"`

- List all open issues with no milestone

    `Invoke-AgileCmd "gh issue list -S 'is:open is:issue no:milestone'"`